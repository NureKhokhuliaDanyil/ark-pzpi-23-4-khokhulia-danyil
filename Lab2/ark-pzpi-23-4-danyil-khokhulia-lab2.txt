МІНІСТЕРСТВО ОСВІТИ І НАУКИ УКРАЇНИ 
  
ХАРКІВСЬКИЙ НАЦІОНАЛЬНИЙ 
УНІВЕРСИТЕТ РАДІОЕЛЕКТРОНІКИ 
  
Кафедра «Програмна інженерія» 
  
ЗВІТ 
з лабораторної роботи № 2 з дисципліни «Аналіз та рефакторинг коду» з теми «Розробка бази даних для серверної частини системи та прикладного програмного інтерфейсу (API)» 
   
Виконав  					Прийняв:                                                              ст. гр. ПЗПІ-23-4           старший викладач ПІ                             	             Хохуля Д. А.                Сокорчук І.П.                                            
Харків  2025 
 
1 ІСТОРІЯ ЗМІН 
№		Дата		Версія звіту		Опис змін та виправлень 		1 		30.11.25		0.1				Створено розділи «Історія змін», «Завдання»2		03.12.25		0.2 			Створено розділи «Опис виконаної роботи», «Висновки», «Додаток А», «Додаток Б», «Додаток В»  2 ЗАВДАННЯ 
1) Розробити будову програмної системи. 
2) Створити UML діаграму прецедентів для серверної частини системи.
3) Створити ER діаграму даних. 
4) Розробити базу даних (БД) програмної системи. 
5) Створити діаграму структури БД. 
6) Розробити функції роботи з БД (ORM або CoRM тощо). 
7) Розробити API (REST або GraphQL, gRPC тощо) для взаємодії серверної частини з клієнтами.
8) Створити специфікацію розробленого API.
9) Створити програмну реалізацію розробленого API та функцій роботи з БД.
10) Перевірити роботу створеного програмного коду серверної частини системи.
11) Завантажити або оновити (при потребі) створений програмний код у GitHub репозиторій для лабораторних робіт у гілку репозиторію main.
12) Створити відеозапис тривалістю 7-9 хвилин з демонстрацією перевірки (тестування) описаної у розділі 3.1 Vision & Scope функціональності серверної частини.
13) Завантажити створений відеозапис у свій канал для облікового запису студента в домені nure.ua на YouTube. При завантаженні відеозапису обовʼязково встановити у налаштуваннях для цього відео українську мову як мову відео та мову субтитрів до відео.
14) Створити хронологічний опис (хвилина:секунда) демонстрації та додати цей опис до опису відео на YouTube.
15) Створити звіт до лабораторної роботи.
16) Вказати у звіті посилання на створений відеозапис на YouTube.
17) Експортувати створений звіт у формат PDF та завантажити його на платформу dl.nure.ua.
18) Експортувати увесь створений звіт у текстовий файл з кодуванням UTF-8 та записати цей файл у GitHub репозиторій для лабораторних робіт.

3 ОПИС ВИКОНАНОЇ РОБОТИ 
     Для побудови програмної системи «WashConnect» було обрано архітектуру з логічним розділенням на шари в межах одного проєкту, реалізовану на платформі .NET 9. Структура рішення організована таким чином, що шар представлення (Controllers) відповідає виключно за обробку HTTP-запитів, шар бізнес-логіки (Services) виконує валідацію та розрахунки, а шар доступу до даних (Data) забезпечує взаємодію з СУБД Microsoft SQL Server через ORM Entity Framework Core. Така організація забезпечує чітке розмежування відповідальності компонентів та дозволяє реалізувати надійний RESTful API для взаємодії з мобільними застосунками та IoT-контролерами за допомогою обміну даними у форматі JSON. 
     Модель даних системи спроєктована на основі реляційних зв'язків між ключовими сутностями предметної області. Центральними елементами є сутність User, яка зберігає облікові дані та баланс користувачів, та Laundry, що агрегує інформацію про фізичні локації та парк пральних машин WashingMachine. Фіксація бізнес-операцій відбувається через сутність WashingSession, яка пов'язує користувача, обраний тарифний план і конкретний пристрій, забезпечуючи збереження історії транзакцій. Усі зв'язки між моделями реалізовані за принципом «один-до-багатьох» із дотриманням правил посилальної цілісності.
     На рисунку 1 наведено UML-діаграму прецедентів, де ієрархія користувачів будується від базового актора «Гість», чиї права успадковують «Клієнт» та «Адміністратор». Ключовий бізнес-процес «Бронювання прання» реалізовано з використанням відношення «include» до прецеденту «Оплата», що забезпечує обов'язкову фінансову валідацію транзакції перед наданням послуги.
     Архітектурною особливістю є наявність технічного актора «IoT-контролер», який взаємодіє з API для автоматичного оновлення статусів машин, що тригерить надсилання сповіщень користувачам. Адміністратор, у свою чергу, має повний доступ до керування інфраструктурою системи через набір сценаріїв для налаштування пралень, обладнання та тарифів.
     
     Рисунок 1 – UML діаграма прецедентів
     З метою формалізації предметної області розроблено розширену ER-діаграму (рис. 2), що охоплює 9 сутностей. Архітектура системи будується навколо двох ключових об'єктів: User (Користувач) та Laundry (Пральня), які агрегують пов'язані дані про фінансові операції, системні сповіщення, парк обладнання та тарифні плани.
     Ключовим елементом бізнес-логіки виступає сутність WashingSession, що фіксує факт надання послуги, об'єднуючи користувача, обрану машину та тариф. Усі зв'язки на діаграмі відображають відношення «один-до-багатьох» та гарантують сувору посилальну цілісність даних, унеможливлюючи існування дочірніх записів (наприклад, технічного журналу чи транзакції) без батьківської прив'язки.
     
     Рисунок 2 – ER діаграма даних
     На основі розробленої ER-діаграми було виконано фізичне проектування таблиць бази даних. Для забезпечення цілісності даних, уникнення надмірності та аномалій при оновленні записів, схема даних пройшла процес нормалізації.
     Перша нормальна форма (1NF) Вимога 1NF передбачає атомарність атрибутів (кожен стовпець містить лише одне значення) та відсутність груп, що повторюються. Для реалізації цього принципу в таблиці WashingMachine ми відмовилися від зберігання списку ремонтів у одному полі (через кому), натомість створивши окрему таблицю MaintenanceLog, де кожен запис є окремим рядком, а адреса пральні в Laundry структурована як єдиний логічний атрибут або розділена на атомарні складові залежно від потреб пошуку.
     Друга нормальна форма (2NF) Вимога 2NF вимагає, щоб таблиця перебувала в 1NF і всі неключові атрибути залежали від повного первинного ключа. Відповідно до цього, у таблиці WashingSession (Сесія прання) ми не зберігаємо атрибути MachineModel або LaundryName, оскільки ці дані залежать лише від MachineId, а не від конкретної сесії прання; тому вони винесені у відповідні довідкові таблиці (WashingMachine, Laundry), а в таблиці сесій залишаються лише зовнішні ключі (FK).
     Третя нормальна форма (3NF) Вимога 3NF вимагає відсутності транзитивних залежностей, тобто неключові атрибути не повинні залежати від інших неключових атрибутів. Для реалізації цього правила параметри вартості (Price) та тривалості (Duration) не зберігаються безпосередньо в таблиці WashingSession або WashingMachine, що створило б дублювання, а винесені в окрему сутність WashMode (Тариф), де ціна залежить виключно від ключа WashModeId.
     На рисунку 3 наведено діаграму структури бази даних (Physical Data Model), розроблену для СУБД Microsoft SQL Server. Діаграма відображає таблиці, типи даних стовпців, первинні (PK) та зовнішні (FK) ключі.
     
     Рисунок 3 – Діаграма структури бази даних (MSSQL)
     
     Для забезпечення взаємодії між серверним кодом та базою даних Microsoft SQL Server використано технологію Entity Framework Core (EF Core). Це об'єктно-реляційний мапер (ORM), який дозволяє працювати з даними, використовуючи строго типізовані об'єкти C#, замість написання «сирих» SQL-запитів.
     Реалізація доступу до даних базується на патерні Repository (або прямому використанні DbContext у сервісах, що допускається у Clean Architecture для простіших проєктів). Взаємодія відбувається через клас контексту ApplicationDbContext.
     Особливу увагу приділено транзакційності. При створенні сесії прання (бронювання) зміни в таблицях WashingSessions (створення запису), Users (списання балансу) та WashingMachines (зміна статусу на "Reserved") виконуються в межах однієї атомарної транзакції бази даних.
     Для побудови прикладного програмного інтерфейсу обрано архітектурний стиль REST (Representational State Transfer). Це забезпечує універсальність доступу для різних типів клієнтів (мобільний додаток, веб-панель адміністратора, IoT-контролери). Обмін даними здійснюється за протоколом HTTP/HTTPS у форматі JSON.
     Система API розділена на контролери відповідно до доменних областей:
1. AuthController: Відповідає за реєстрацію, вхід у систему та оновлення токенів доступу.
2. LaundriesController: Надає публічну інформацію про пральні, їх розташування та графік роботи.
3. MachinesController: Забезпечує управління станом машин. Має специфічні методи для IoT-пристроїв.
4. SessionsController: Реалізує основну бізнес-логіку бронювання та керування процесом прання.
5. TransactionsController: Дозволяє користувачам переглядати історію списань та поповнень.

     Для автоматизації процесу документування та тестування ендпоінтів було використано бібліотеку Swashbuckle.AspNetCore, яка генерує інтерактивну документацію відповідно до стандарту OpenAPI 3.0. Це дозволяє отримувати актуальний опис усіх контролерів, типів даних та кодів відповідей безпосередньо з програмного коду.
     
4 ВИСНОВКИ 
     У ході лабораторної роботи було виконано етап технічного проєктування та програмної реалізації серверної частини (Back-end) інформаційної системи автоматизації пралень «WashConnect». На основі аналізу предметної області було розроблено UML-діаграму прецедентів, яка формалізувала сценарії взаємодії користувачів та IoT-пристроїв із системою, виділивши критичні процеси бронювання та оплати послуг. 
     Ключовим етапом стало проєктування структури даних. Було розроблено розширену ER-діаграму, що включає 9 сутностей, та проведено нормалізацію бази даних до 3NF. Фізична реалізація виконана в СУБД Microsoft SQL Server із використанням технології Entity Framework Core (Code First), що забезпечило сувору типізацію та посилальну цілісність даних. 
     В якості платформи розробки використано .NET 9 та фреймворк ASP.NET Core Web API. Було імплементовано багатошарову архітектуру в межах одного проєкту, що дозволило чітко розмежувати логіку обробки запитів (Controllers), бізнес-правила (Services) та доступ до даних (Data Layer). Реалізовано повноцінний RESTful API, який підтримує CRUD-операції, автентифікацію через JWT-токени та специфічні сценарії для взаємодії з мікроконтролерами пральних машин. 
     Коректність роботи розробленого програмного забезпечення перевірено за допомогою інтерактивної документації Swagger UI. Тестування підтвердило, що API успішно обробляє запити на реєстрацію, створення транзакцій та оновлення статусів обладнання. Таким чином, серверна частина системи є повністю функціональною та готовою до подальшої інтеграції з клієнтськими мобільними застосунками
 
5 ВИКОРИСТАНІ ДЖЕРЕЛА 
1) Методичні вказівки до лабораторних робіт з дисципліни «Аналіз та рефакторинг коду програмного забезпечення» (дата звернення: 
20.11.2025). 
2) ASP.NET documentation. Microsoft Learn: Build skills that open doors in your career. URL: https://docs.microsoft.com/en-us/aspnet/core/ (дата звернення: 10.10.2025). 
3) OpenAPI Specification - Version 3.1.0 | Swagger. API Documentation & Design Tools for Teams | Swagger. URL: https://swagger.io/specification/ (дата звернення: 18.11.2025). 
4) Entity Framework Core documentation. Microsoft Learn: Data access for .NET. URL: https://learn.microsoft.com/en-us/ef/core/ (дата звернення: 24.11.2025).

ДОДАТОК А 
Відеозапис презентації результатів лабораторної роботи: 
https://youtu.be/uubZSpoBACA
Хронологічний опис відеозапису: 
00:00 – Вступ 
00:16 – UML-діаграмма 
1:50 – EF-діаграмма 
2:53 – Демонстрація роботи API

ДОДАТОК Б
З кодом проекту можна ознайомитися на платформі зберігання версій Git, за наведеним нижче посиланням:
https://github.com/NureKhokhuliaDanyil/Washing 